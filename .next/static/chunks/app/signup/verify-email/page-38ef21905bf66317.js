(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1812],{879:()=>{},1395:(e,i,a)=>{Promise.resolve().then(a.bind(a,6060))},6060:(e,i,a)=>{"use strict";a.r(i),a.d(i,{default:()=>u});var l=a(5155),s=a(2115),r=a(5695),t=a(4540),n=a(7947);let o=async e=>{try{let i=await fetch(n.Vd+n.JA,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}),a=await i.json();if(!i.ok)throw Error(a.error||"Verification failed");return a}catch(e){return console.error("Verification error:",e),{success:!1,code:"000000"}}};var c=a(8753);a(879);var d=a(8331);function u(){let e=(0,r.useRouter)(),[i,a]=(0,s.useState)(""),[n,u]=(0,s.useState)(""),[p,f]=(0,s.useState)(""),[m,h]=(0,s.useState)(!1),[y,v]=(0,s.useState)(0),[x,j]=(0,s.useState)(0),{user:g}=(0,t.d4)(e=>e.auth),b=null==g?void 0:g.email,N=null==g?void 0:g.userId,w=async()=>{try{let{code:e}=await o(b);u("000000"),v(0),j(60)}catch(e){f("Failed to send verification code")}};(0,s.useEffect)(()=>{b&&w()},[b]),(0,s.useEffect)(()=>{let e=setInterval(()=>{v(e=>e+1)},1e3);return()=>clearInterval(e)},[]),(0,s.useEffect)(()=>{if(x<=0)return;let e=setTimeout(()=>{j(x-1)},1e3);return()=>clearTimeout(e)},[x]);let S=async()=>{await w()},C=async a=>{a.preventDefault(),f(""),h(!0);try{if(y>120)return void f("The code has expired. Please request a new one.");if(i===n){if(!N)return void f("User ID not found");await (0,c.N)(N,"verifiedEmail",!0),e.push("/signup/complete-profile")}else f("Invalid verification code")}catch(e){f("Verification failed")}finally{h(!1)}};return(0,l.jsx)("div",{className:"verify-email-container",children:(0,l.jsxs)("div",{className:"verify-email-box",children:[(0,l.jsxs)("div",{className:"verify-email-header",children:[(0,l.jsx)(d.A,{}),(0,l.jsx)("h2",{className:"verify-email-title",children:"Check your inbox"}),(0,l.jsxs)("p",{className:"verify-email-subtitle",children:["We've sent a verification code to ",b]}),(0,l.jsxs)("p",{className:"verify-email-timer",children:["Sent ",y,"s ago â€” expires after 120s"]})]}),(0,l.jsx)("div",{className:"verify-email-form-container",children:(0,l.jsx)("div",{className:"verify-email-form-box",children:(0,l.jsxs)("form",{className:"verify-email-form",onSubmit:C,children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"code",className:"verify-email-label",children:"Verification Code"}),(0,l.jsx)("div",{className:"verify-email-input-wrapper",children:(0,l.jsx)("input",{id:"code",name:"code",type:"text",required:!0,value:i,onChange:e=>a(e.target.value),className:"verify-email-input",placeholder:"Enter 6-digit code"})})]}),p&&(0,l.jsx)("p",{className:"verify-email-error",children:p}),(0,l.jsx)("div",{children:(0,l.jsx)("button",{type:"submit",disabled:m,className:"verify-email-submit",children:m?"Verifying...":"Verify"})}),(0,l.jsx)("div",{className:"verify-email-resend-wrapper",children:(0,l.jsx)("button",{type:"button",onClick:S,disabled:x>0,className:"verify-email-resend",children:x>0?"Resend code in ".concat(x,"s"):"Didn't receive the code? Resend"})})]})})})]})})}},7947:e=>{"use strict";e.exports=JSON.parse('{"Vd":"http://localhost:8000","$6":"/api/users/login","ib":"/api/users/signup","JA":"/api/users/verifyemail","WO":"/api/users/updateuser","rM":"/api/blog/getlatestarticles","C":"/api/blog/getolderarticles","kb":"/api/corporate/contact","Dz":"/api/blog/getrecommandations","Kd":"/api/analysis/createprocess","Xi":"/api/analysis/accept-agreement","ST":"/api/analysis/update-input","WI":"/api/analysis/get-analysis-from-id","JG":"/api/payment/create-checkout-session","kZ":"/api/users/update-username","Uy":"/api/users/update-bio","MA":"/api/users/update-country","iz":"/api/payment/get-user-payments","Gb":"/api/analysis/get-user-analyses","mP":"/api/payment/get-user-credits","V$":"/api/payment/unlock-analysis","hG":"/api/users/delete-user"}')},8331:(e,i,a)=>{"use strict";a.d(i,{A:()=>s});var l=a(5155);function s(e){let{size:i=2}=e,a="".concat(i,"em");return(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",children:[(0,l.jsx)("defs",{children:(0,l.jsxs)("linearGradient",{id:"icon-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#7692CF"}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#3C4A69"})]})}),(0,l.jsxs)("g",{fill:"none",children:[(0,l.jsx)("path",{d:"m12.594 23.258l-.012.002l-.071.035l-.02.004l-.014-.004l-.071-.036q-.016-.004-.024.006l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.016-.018m.264-.113l-.014.002l-.184.093l-.01.01l-.003.011l.018.43l.005.012l.008.008l.201.092q.019.005.029-.008l.004-.014l-.034-.614q-.005-.019-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.003-.011l.018-.43l-.003-.012l-.01-.01z"}),(0,l.jsx)("path",{fill:"url(#icon-gradient)",d:"M9.107 5.448c.598-1.75 3.016-1.803 3.725-.159l.06.16l.807 2.36a4 4 0 0 0 2.276 2.411l.217.081l2.36.806c1.75.598 1.803 3.016.16 3.725l-.16.06l-2.36.807a4 4 0 0 0-2.412 2.276l-.081.216l-.806 2.361c-.598 1.75-3.016 1.803-3.724.16l-.062-.16l-.806-2.36a4 4 0 0 0-2.276-2.412l-.216-.081l-2.36-.806c-1.751-.598-1.804-3.016-.16-3.724l.16-.062l2.36-.806A4 4 0 0 0 8.22 8.025l.081-.216zM19 2a1 1 0 0 1 .898.56l.048.117l.35 1.026l1.027.35a1 1 0 0 1 .118 1.845l-.118.048l-1.026.35l-.35 1.027a1 1 0 0 1-1.845.117l-.048-.117l-.35-1.026l-1.027-.35a1 1 0 0 1-.118-1.845l.118-.048l1.026-.35l.35-1.027A1 1 0 0 1 19 2"})]})]})}a(2115)},8753:(e,i,a)=>{"use strict";a.d(i,{N:()=>s});var l=a(7947);let s=async(e,i,a)=>{try{let s=await fetch(l.Vd+l.WO,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,parameter:i,value:a})}),r=await s.json();if(!s.ok)throw Error(r.error||"Failed to update user field");return r}catch(e){throw console.error("Error updating user field:",e),e}}}},e=>{var i=i=>e(e.s=i);e.O(0,[934,7466,8441,1684,7358],()=>i(1395)),_N_E=e.O()}]);