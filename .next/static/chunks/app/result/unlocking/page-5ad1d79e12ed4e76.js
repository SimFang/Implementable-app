(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3877],{150:(e,s,a)=>{Promise.resolve().then(a.bind(a,4268))},2942:()=>{},4268:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>m});var n=a(5155),t=a(5695),l=a(2115),r=a(5089),c=a(6203),o=a(7947);async function i(){let e=(0,c.xI)();try{let s=e.currentUser;if(!s)throw Error("User not logged in");let a=await s.getIdToken(),n=await fetch(o.Vd+o.mP,{method:"POST",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}});if(!n.ok){let e=await n.json();throw Error(e.error||"Failed to fetch credits")}return(await n.json()).creditsPurchased}catch(e){throw console.error("Error fetching user credits:",e),e}}async function u(e){try{let s=(0,c.xI)().currentUser;if(!s)throw Error("User not authenticated");let a=s.uid,n=await fetch(o.Vd+o.V$,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({analysisId:e})}),t=await n.json();if(!n.ok)throw Error(t.error||"Failed to unlock analysis");return{success:!0,message:t.message}}catch(e){return console.error("Unlock error:",e.message),{success:!1,error:e.message}}}function d(e){let{analysisId:s,analysisData:a,credits:r}=e,[c,o]=(0,l.useState)(""),[i,d]=(0,l.useState)(""),[h,p]=(0,l.useState)(!1),[m,g]=(0,l.useState)(null),[k,x]=(0,l.useState)(!1),[y,j]=(0,l.useState)(!1),f=(0,t.useRouter)();(0,l.useEffect)(()=>{o(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a="";for(let n=0;n<e;n++)a+=s.charAt(Math.floor(Math.random()*s.length));return a}())},[]);let N=async()=>{if(!s)return;x(!0);let e=await u(s);e.success?(setTimeout(()=>{j(!0),g("Analysis successfully unlocked!"),x(!1)},3e3),setTimeout(()=>{f.push("/result/unlocking/loading?analysisId=".concat(encodeURIComponent(s)))},3500)):(g(e.error),x(!1))};return(0,n.jsxs)("div",{className:"unlock-container",children:[(0,n.jsx)("h1",{className:"unlock-title",children:"Unlock Your Analysis"}),(0,n.jsxs)("div",{className:"unlock-summary",children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"label",children:"Price:"})," ",(0,n.jsx)("span",{className:"value",children:"1 token"})]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"label",children:"Your Balance:"})," ",(0,n.jsxs)("span",{className:"value",children:[r," tokens"]})]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"label",children:"Balance After Unlock:"})," ",(0,n.jsxs)("span",{className:"value",children:[r-1," tokens"]})]})]}),(0,n.jsx)("p",{className:"unlock-description",children:"Access detailed AI strategy recommendations and business impact insights by unlocking this report."}),(0,n.jsxs)("label",{className:"confirmation-label",children:[(0,n.jsx)("input",{type:"checkbox",checked:h,onChange:e=>p(e.target.checked)}),"I agree that 1 token will be deducted from my balance."]}),(0,n.jsx)("button",{onClick:N,className:"unlock-button-pay ".concat(k?"loading":""," ").concat(y?"success":""),disabled:!h||k||y,children:k?"Unlocking...":y?"Unlocked âœ“":"Unlock"}),m&&(0,n.jsx)("p",{className:"unlock-message",children:m})]})}function h(e){let{credits:s}=e,a=(0,t.useRouter)();return(0,n.jsxs)("div",{className:"unlock-container",children:[(0,n.jsx)("h1",{className:"unlock-title",children:"Not Enough Tokens"}),(0,n.jsxs)("div",{className:"unlock-summary",children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"label",children:"Your Balance:"})," ",(0,n.jsxs)("span",{className:"value",children:[s," tokens"]})]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"label",children:"Required:"})," ",(0,n.jsx)("span",{className:"value",children:"1 token"})]})]}),(0,n.jsx)("p",{className:"unlock-description",children:"You need at least 1 token to unlock this AI Strategy Report. Please purchase more tokens to continue."}),(0,n.jsx)("button",{onClick:()=>{a.push("/pricing")},className:"unlock-button-pay",children:"Get More Tokens"})]})}var p=a(8331);function m(){let e=(0,t.useSearchParams)().get("analysisId"),[s,a]=(0,l.useState)(null),[c,o]=(0,l.useState)(null),[u,m]=(0,l.useState)(null),[g,k]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{(async()=>{try{if(!e)return;let s=await (0,r.R)(e);s.success&&s.data&&a(s.data);let n=await i();o(n)}catch(e){console.error(e),m("Failed to load data")}finally{k(!1)}})()},[e]),(0,n.jsxs)("div",{className:"unlocking-page",children:[(0,n.jsx)("div",{className:"unlocking-container",children:(0,n.jsxs)("div",{className:"unlocking-box",children:[(0,n.jsx)(p.A,{}),g&&(0,n.jsx)("p",{className:"unlocking-loading",children:"Loading..."}),u&&(0,n.jsx)("p",{className:"unlocking-error",children:u}),!g&&!u&&s&&null!==c&&(0,n.jsx)(n.Fragment,{children:c>0?(0,n.jsx)(d,{analysisId:e,analysisData:s,credits:c}):(0,n.jsx)(h,{credits:c})})]})}),(0,n.jsx)("div",{className:"unlocking-gradient"})]})}a(2942)},5089:(e,s,a)=>{"use strict";a.d(s,{R:()=>l});var n=a(7947);let t=n.Vd+n.WI,l=async e=>{try{let s=await fetch("".concat(t,"?analysisId=").concat(encodeURIComponent(e)),{method:"GET",headers:{"Content-Type":"application/json"}}),a=await s.json();if(!s.ok)throw Error(a.error||"Failed to retrieve analysis");return{success:!0,message:a.message,data:a.data}}catch(e){return console.error("Error calling getAnalysis:",e),{success:!1,error:e.message||"An error occurred while retrieving analysis"}}}},5695:(e,s,a)=>{"use strict";var n=a(8999);a.o(n,"notFound")&&a.d(s,{notFound:function(){return n.notFound}}),a.o(n,"useParams")&&a.d(s,{useParams:function(){return n.useParams}}),a.o(n,"usePathname")&&a.d(s,{usePathname:function(){return n.usePathname}}),a.o(n,"useRouter")&&a.d(s,{useRouter:function(){return n.useRouter}}),a.o(n,"useSearchParams")&&a.d(s,{useSearchParams:function(){return n.useSearchParams}})},7947:e=>{"use strict";e.exports=JSON.parse('{"Vd":"http://localhost:8000","$6":"/api/users/login","ib":"/api/users/signup","JA":"/api/users/verifyemail","WO":"/api/users/updateuser","rM":"/api/blog/getlatestarticles","C":"/api/blog/getolderarticles","kb":"/api/corporate/contact","Dz":"/api/blog/getrecommandations","Kd":"/api/analysis/createprocess","Xi":"/api/analysis/accept-agreement","ST":"/api/analysis/update-input","WI":"/api/analysis/get-analysis-from-id","JG":"/api/payment/create-checkout-session","kZ":"/api/users/update-username","Uy":"/api/users/update-bio","MA":"/api/users/update-country","iz":"/api/payment/get-user-payments","Gb":"/api/analysis/get-user-analyses","mP":"/api/payment/get-user-credits","V$":"/api/payment/unlock-analysis","hG":"/api/users/delete-user"}')},8331:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});var n=a(5155);function t(e){let{size:s=2}=e,a="".concat(s,"em");return(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",children:[(0,n.jsx)("defs",{children:(0,n.jsxs)("linearGradient",{id:"icon-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,n.jsx)("stop",{offset:"0%",stopColor:"#7692CF"}),(0,n.jsx)("stop",{offset:"100%",stopColor:"#3C4A69"})]})}),(0,n.jsxs)("g",{fill:"none",children:[(0,n.jsx)("path",{d:"m12.594 23.258l-.012.002l-.071.035l-.02.004l-.014-.004l-.071-.036q-.016-.004-.024.006l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.016-.018m.264-.113l-.014.002l-.184.093l-.01.01l-.003.011l.018.43l.005.012l.008.008l.201.092q.019.005.029-.008l.004-.014l-.034-.614q-.005-.019-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.003-.011l.018-.43l-.003-.012l-.01-.01z"}),(0,n.jsx)("path",{fill:"url(#icon-gradient)",d:"M9.107 5.448c.598-1.75 3.016-1.803 3.725-.159l.06.16l.807 2.36a4 4 0 0 0 2.276 2.411l.217.081l2.36.806c1.75.598 1.803 3.016.16 3.725l-.16.06l-2.36.807a4 4 0 0 0-2.412 2.276l-.081.216l-.806 2.361c-.598 1.75-3.016 1.803-3.724.16l-.062-.16l-.806-2.36a4 4 0 0 0-2.276-2.412l-.216-.081l-2.36-.806c-1.751-.598-1.804-3.016-.16-3.724l.16-.062l2.36-.806A4 4 0 0 0 8.22 8.025l.081-.216zM19 2a1 1 0 0 1 .898.56l.048.117l.35 1.026l1.027.35a1 1 0 0 1 .118 1.845l-.118.048l-1.026.35l-.35 1.027a1 1 0 0 1-1.845.117l-.048-.117l-.35-1.026l-1.027-.35a1 1 0 0 1-.118-1.845l.118-.048l1.026-.35l.35-1.027A1 1 0 0 1 19 2"})]})]})}a(2115)}},e=>{var s=s=>e(e.s=s);e.O(0,[2727,7811,6435,8441,1684,7358],()=>s(150)),_N_E=e.O()}]);